buildscript {
	ext.intellijBaseVersion = "2018.1"
}

plugins {
  id "org.jetbrains.intellij" version "0.3.2"

}

apply plugin: "kotlin"
apply plugin: "idea"

sourceSets {
	main.kotlin.srcDirs += "src"
	main.resources.srcDirs += "resources"
	test.kotlin.srcDirs += "test"
}

dependencies {
	compile project(":ktor-generator-jvm")
}

def intellijVersion = "IC-$intellijBaseVersion"

intellij {
	version intellijVersion
	plugins = ['maven', 'gradle', 'properties', 'junit', 'coverage']
	pluginName 'ktor'
	downloadSources true
}

//publishPlugin {
//	if (globalProps.jetbrainsUsername != null) {
//		username globalProps.jetbrainsUsername
//		password globalProps.jetbrainsPassword
//	}
//}

runIde {
	maxHeapSize = "2g"
}

repositories {
	jcenter()
	maven { url "https://plugins.gradle.org/m2/" }
}

kotlin.experimental.coroutines 'enable'
